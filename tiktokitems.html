<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TikTok Videos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        "primary-dark": "#111827",
        "primary-light": "#FFFFFF",
        accent: "#00AEEF",
        subtle: "#E5E7EB",
        "background-light": "#F8F8F8",
      }
    }
  }
}
</script>

<style>
body { background:#f8f8f8; }

.header-gradient {
  background: linear-gradient(135deg, #ffffff 60%, #e0f7fa 100%);
}

/* TikTok thumbnail portrait ratio */
.thumb-box {
  position: relative;
  width: 100%;
  padding-top: 177.78%; /* 9:16 ratio */
  overflow: hidden;
  border-radius: 12px;
  background:#e5e7eb;
}
.thumb-box img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
</style>
</head>

<body class="text-gray-800 font-sans min-h-screen">

<!-- SIDEBAR -->
<div id="sidebar"
     class="fixed top-0 left-0 h-full w-64 p-6 shadow-2xl transform -translate-x-full transition-transform duration-300 z-50 bg-white border-r border-subtle">

  <h3 class="text-xl font-bold text-accent mb-6">Navigation</h3>

  <nav class="flex flex-col space-y-3">
    <button onclick="navigate('home')" class="text-left py-2 px-3 rounded-lg font-medium hover:bg-gray-100">Home</button>
    <button onclick="navigate('data')" class="text-left py-2 px-3 rounded-lg font-medium hover:bg-gray-100">Spreadsheet</button>
    <button onclick="navigate('link-converter')" class="text-left py-2 px-3 rounded-lg font-medium hover:bg-gray-100">Link Converter</button>
    <button onclick="navigate('trusted-sellers')" class="text-left py-2 px-3 rounded-lg font-medium hover:bg-gray-100">Trusted Sellers</button>
    <button onclick="navigate('tiktok-items')" class="text-left py-2 px-3 rounded-lg font-medium bg-gray-200">TikTok Videos</button>
  </nav>
</div>

<div id="sidebarBackdrop"
     onclick="toggleSidebar()"
     class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>


<!-- MAIN CONTAINER -->
<div class="max-w-7xl mx-auto p-4 sm:p-8">

  <!-- HEADER -->
  <header class="header-gradient flex justify-between items-center mb-6 pb-4 rounded-b-xl shadow-md px-4 sm:px-8 pt-4">
    <svg onclick="toggleSidebar()" class="w-8 h-8 text-accent cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>

    <img onclick="navigate('home')"
         src="https://raw.githubusercontent.com/MinerBlox/website/refs/heads/main/images/mainlogo.png"
         class="h-10 cursor-pointer">

    <button onclick="openAdmin()" class="text-gray-700">Admin?</button>
  </header>

  <!-- ADMIN MODAL -->
  <div id="adminModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center">
    <div class="bg-white p-6 rounded-xl w-72">
      <h2 class="text-lg font-bold mb-3">Admin Unlock</h2>
      <input id="adminPass" type="password" placeholder="Enter password..." class="w-full p-2 border rounded mb-4">
      <button onclick="doAdminLogin()" class="bg-blue-500 text-white w-full py-2 rounded">Unlock</button>
    </div>
  </div>

  <h1 class="text-3xl font-bold mb-6">TikTok Videos</h1>

  <div id="videoGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>

</div>

<!-- FIREBASE LOGIC -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore, collection, onSnapshot
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
    apiKey:"AIzaSyDTI2oJIvrtQmYxwz8t2CQ9JJn8r7kMEy7JA",
    authDomain:"reps-central.firebaseapp.com",
    projectId:"reps-central",
    storageBucket:"reps-central.firebasestorage.app",
    messagingSenderId:"812299387060",
    appId:"1:812299387060:web:1c93d1e7bf30b65653d7e1"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let isAdmin = false;

function openAdmin(){ adminModal.classList.remove("hidden"); }
function closeAdmin(){ adminModal.classList.add("hidden"); }

window.doAdminLogin = () => {
  if(adminPass.value === "admintest"){
    isAdmin = true;
    closeAdmin();
  } else {
    alert("Incorrect password.");
  }
};


/* SIDEBAR NAVIGATION */
window.toggleSidebar = () => {
  const sb = document.getElementById('sidebar');
  const bg = document.getElementById('sidebarBackdrop');
  const closed = sb.classList.contains("-translate-x-full");

  if(closed){
    sb.classList.remove("-translate-x-full");
    bg.classList.remove("hidden");
  } else {
    sb.classList.add("-translate-x-full");
    bg.classList.add("hidden");
  }
};

window.navigate = (p) => {
  if(p === "home") location.href = "index.html";
  if(p === "data") location.href = "products.html";
  if(p === "link-converter") location.href = "link-converter.html";
  if(p === "trusted-sellers") location.href = "trusted-sellers.html";
  if(p === "tiktok-items") location.href = "tiktokitems (2).html";
};


/* LOAD VIDEOS */
const grid = document.getElementById("videoGrid");

onSnapshot(collection(db, "tiktokvideos"), snap => {
  grid.innerHTML = "";

  snap.forEach(doc => {
    const d = doc.data();

    grid.innerHTML += `
      <div onclick="location.href='tiktokvideo.html?id=${doc.id}'"
           class="bg-white shadow rounded-xl p-3 cursor-pointer hover:shadow-lg transition">

        <div class="thumb-box mb-3">
          <img src="${d.thumbnailurl || ""}">
        </div>

        <div class="font-semibold text-gray-800">${d.name || "Untitled Video"}</div>
      </div>
    `;
  });
});

</script>

</body>
</html>
